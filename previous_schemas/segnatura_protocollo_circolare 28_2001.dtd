<?xml version="1.0" encoding="UTF-8"?>
<!--
*************************************************************************
* Allegato X alla Delibera...*
* "Formato e definizioni dei tipi di informazioni minime ed *
* accessorie comunemente scambiate tra le pubbliche amministrazioni *
* e associate ai documenti protocollati" *
* *
* versione del gg mm 20XX *
* *
*************************************************************************
-->
<!--
*************************************************************************
* *
* Data di pubblicazione della DTD *
* *
*************************************************************************
-->

<!--
*************************** ROOT ELEMENT ********************************
* *
* La DTD prevede cinque possibili "ROOT ELEMENT": *
* - Segnatura *
* - ConfermaRicezione *
* - AggiornamentoConferma *
* - NotificaEccezione *
* - AnnullamentoProtocollazione *
* *
*************************************************************************
-->
<!--
*************************** Segnatura ***********************************
* *
* Si compone di quattro sezioni, di cui due obbligatorie (Intestazione e *
* Descrizione) ed una opzionale (Riferimenti e PiuInfo): *
* - la sezione Intestazione contiene i dati identificativi e le *
* informazioni fondamentali del messaggio; *
* - la sezione Riferimenti contiene le informazioni relative al *
* contesto generale di cui il messaggio fa parte; *
* - la sezione Descrizione contiene le informazioni descrittive *
* riguardanti il contenuto del messaggio. *
* - la sezione PiuInfo contiene eventuali ulteriori informazioni *
* *
* Gli attributi della Segnatura definiscono la versione di riferimento *
* del formato ed il linguaggio usato nella definizione *
* dei valori testuali. In questa versione della DTD l'attributo *
* "versione" ha valore fisso, pari alla data di pubblicazione, *
* espressa in formato ISO 8601 esteso (i.e. aaaa-mm-gg). *
* L'attributo standard xml:lang ha come valore fisso il token "it" *
* (codice standard ISO 639) ed indica l'uso della lingua italiana come *
* default per il contenuto testuale degli elementi XML. *
* *
*************************************************************************
-->
<!ELEMENT Segnatura (Intestazione, Riferimenti?, Descrizione, PiuInfo?)>
<!ATTLIST Segnatura
versione NMTOKEN #FIXED "aaaa-mm-gg"
xml:lang NMTOKEN #FIXED "it">
<!--
*************************** Intestazione ********************************
* *
* L'elemento Intestazione e` obbligatorio nella Segnatura Informatica e *
* contiene gli elementi essenziali di identificazione e *
* caratterizzazione amministrativa del Messaggio Protocollato. *
* L'elemento Intestazione contiene anche le informazioni relative alla *
* trasmissione del messaggio, sia dal punto di vista telematico *
* che amministrativo. *
* *
*************************************************************************
-->
<!ELEMENT Intestazione (Identificatore, PrimaRegistrazione?,
OraRegistrazione?, Origine, Destinazione+, PerConoscenza*, Risposta?,
Riservato?, InterventoOperatore?, RiferimentoDocumentiCartacei?,
RiferimentiTelematici?, Oggetto, Classifica*, Note?)>
<!--
*************************** Identificatore ******************************
* *
* Un elemento Identificatore contiene le informazioni identificative *
* previste nelle regole tecniche del protocollo informatico *
* L'elemento Identificatore inserito al primo livello nell'Intestazione *
* riporta i dati dell'Identificatore di Registrazione del *
* Messaggio Protocollato. Nelle altre posizioni in cui viene utilizzato *
* nella DTD esso riporta i dati di un generico Identificatore di *
* Protocollo il cui significato e` desumibile dal contesto. *
* *
* Regole aggiuntive *
* - il CodiceAmministrazione e' dato dal valore *
* assegnato automaticamente all�Amministrazione *
* dall�IPA in fase di accrediatamento *
* - il CodiceAOO e' codificato mediante un sottoinsieme dei *
* caratteri previsti dalla specifica US-ASCII a 8 bit; il codice � *
* composto da lettere maiuscole ([A-Z]), lettere minuscole ([az]), *
* caratteri numerici ([0-9]) e dai caratteri '.', '-' e '_'; *
* - il CodiceAOO deve avere una lunghezza non superiore a 16 caratteri. *
* - il CodiceRegistro � codificato mediante un sottoinsieme dei *
* caratteri previsti dalla specifica US-ASCII a 8 bit; il codice � *
* composto da lettere maiuscole ([A-Z]), lettere minuscole ([az]), *
* caratteri numerici ([0-9]) e dai caratteri '.', '-' e '_'; *
* - il CodiceRegistro deve avere una lunghezza non superiore a 16 caratteri. *
* - il NumeroRegistrazione deve essere sempre formato da almeno sette *
* cifre decimali, con giustificazione mediante zeri (e.g. il numero 1 *
* deve essere codificato come 0000001). *
* - la DataRegistrazione deve essere in formato ISO 8601 esteso *
* (i.e. aaaa-mm-gg). *
* *
* Regole di corrispondenza *
* - Il CodiceAmministrazione coincide con il codice assegnato *
* automaticamente all�Amministrazione dall�IPA *
* - il CodiceAOO deve corrispondere ad un codice valido attribuito *
* dalla amministrazione di cui la AOO fa parte. Il CodiceAOO *
* deve essere unico per l�Amministrazione. *
* - il CodiceRegistro deve corrispondere ad un codice valido attribuito *
* dalla amministrazione al registro nell�ambito della AOO *
* in cui � stato definito *
* *
* *
*************************************************************************
-->
<!ELEMENT Identificatore (CodiceAmministrazione, CodiceAOO,
CodiceRegistro, NumeroRegistrazione, DataRegistrazione)>
<!ELEMENT CodiceAmministrazione (#PCDATA)>
<!ELEMENT CodiceAOO (#PCDATA)>
<!ELEMENT CodiceRegistro (#PCDATA)>
<!ELEMENT NumeroRegistrazione (#PCDATA)>
<!ELEMENT DataRegistrazione (#PCDATA)>
<!--
*************************** PrimaRegistrazione **************************
* *
* La PrimaRegistrazione si riferisce all'Identificatore di *
* Registrazione primario, cioe` attribuito per primo ad un Documento *
* Protocollato che viene ritrasmesso piu` volte. *
* *
* Regole di corrispondenza *
* - la PrimaRegistrazione deve essere specificata solo se non coincide *
* con l'Identificatore del Messaggio Protocollato. *
* *
*************************************************************************
-->
<!ELEMENT PrimaRegistrazione (Identificatore)>
<!--
*************************** OraRegistrazione ****************************
* *
* L'elemento OraRegistrazione riporta l'ora di creazione della *
* Registrazione di Protocollo del Messaggio Protocollato. *
* *
* L'attributo tempo descrive il tipo di misurazione temporale *
* utilizzata. *
* Il token "locale" indica il tempo locale non sincronizzato del *
* sistema dove la Registrazione di Protocollo e` stata creata. *
* Il token "spc" indica il tempo sincronizzato di SPC. *
* *
* Regole aggiuntive *
* - l'OraRegistrazione deve essere in formato ISO 8601 esteso *
* (i.e. hh:mm:ss[,ddd] - ad esempio 16:09:19,710; *
* si noti che l'indicazione dei millisecondi e' opzionale). *
* *
*************************************************************************
-->
<!ELEMENT OraRegistrazione (#PCDATA)>
<!ATTLIST OraRegistrazione
tempo (locale | spc | NMTOKEN) "locale">
<!--
*************************** Origine *************************************
* *
* L'elemento Origine riporta i dati telematici ed amministrativi del *
* mittente del Messaggio Protocollato. *
* *
* Regole di corrispondenza *
* - la descrizione dell'Origine deve essere specificata nel modo piu' *
* completo possibile. *
* *
*************************************************************************
-->
<!ELEMENT Origine (IndirizzoTelematico, Mittente)>
<!--
*************************** Destinazione ********************************
* *
* Ciascun elemento Destinazione contiene i dati telematici ed *
* amministrativi di un singolo destinatario del Messaggio Protocollato. *
* *
* L'attributo confermaRicezione indica la richiesta di invio di una *
* Conferma di Ricezione da parte del destinatario. *
* *
* Regole di corrispondenza *
* - se la Destinazione del Messaggio Protocollato e' una pubblica *
* amministrazione l'IndirizzoTelematico indicato deve corrispondere: *
* nel caso il canale utilizzato sia la posta elettronica a quello *
* della casella istituzionale della AOO o di altra casella di posta *
* dell� amministrazione pubblicata nell�indice delle amministrazioni *
* e/o nel manuale di gestione; *
* nel caso il canale utilizzato sia la cooperazione applicativa, *
* all�URI che specifica l�indirizzo per il binding del servizio esposto *
* *
*************************************************************************
-->
<!ELEMENT Destinazione (IndirizzoTelematico, Destinatario*)>
<!ATTLIST Destinazione
confermaRicezione (si | no) "no">
<!--
*************************** PerConoscenza *******************************
* *
* Ciascun elemento PerConoscenza contiene i dati telematici ed *
* amministrativi di un destinatario per conoscenza del Messaggio *
* Protocollato. *
* *
* L'attributo confermaRicezione indica la richiesta di invio di una *
* Conferma di Ricezione da parte del destinatario per conoscenza. *
* *
* Regole di corrispondenza *
* - se la destinazione PerConoscenza del Messaggio Protocollato e' una *
* pubblica amministrazione l'IndirizzoTelematico indicato deve *
* corrispondere a quello della casella istituzionale della AOO *
* destinataria. *
* *
*************************************************************************
-->
<!ELEMENT PerConoscenza (IndirizzoTelematico, Destinatario*)>
<!ATTLIST PerConoscenza
confermaRicezione (si | no) "no">
<!--
*************************** Risposta ************************************
* *
* L'elemento Risposta indica un indirizzo telematico da utilizzarsi per *
* le risposte automatiche (i.e. ConfermaRicezione, NotificaEccezione, *
* AggiornamentoConferma, AnnullamentoProtocollazione). *
* Tale indirizzo viene specificato solo se non coincidente con *
* l'indirizzo telematico indicato nell'elemento Origine. *
* *
* Regole di corrispondenza *
* - dato che Conferme di Ricezione, Messaggi di Notifica di Eccezione, *
* Aggiornamenti di Conferma, Annullamenti di Protocollazione non sono *
* soggetti a protocollazione, l'IndirizzoTelematico indicato *
* nell'elemento Risposta puo` essere diverso da quello di una casella *
* istituzionale. *
* *
*************************************************************************
-->
<!ELEMENT Risposta (IndirizzoTelematico)>
<!--
*************************** IndirizzoTelematico *************************
* *
* Un IndirizzoTelematico contiene un indirizzo, ad esempio di posta *
* elettronica, utilizzato per la trasmissione telematica. *
* *
* L'attributo tipo di indirizzo telematico specificato. *
* Il token "smtp" indica un indirizzo SMTP, il token "uri" indica la *
* specifica di un indirizzo telematico tramite la sintassi delle URI. *
* Il formato libero (NMTOKEN) e' da utilizzarsi per l'indicazione di *
* tipo di sistemi di messaging diversi da quelli utilizzati su internet *
* (e.g. sistemi proprietari). *
* *
* Regole aggiuntive *
* - il contenuto dell'elemento IndirizzoTelematico di tipo "smtp" *
* deve essere sintatticamente conforme a quanto previsto dalle *
* specifiche pubbliche RFC 822 e RFC2822; *
* - il contenuto dell'elemento IndirizzoTelematico di tipo "uri" *
* deve essere sintatticamente conforme a quanto previsto dalla *
* specifica pubblica RFC 1738. *
* *
* Regole di corrispondenza *
* - non e` ammesso l'uso del tipo "uri" per l'indicazione di un *
* indirizzo SMTP (i.e. tramite una URI "mailto:"); *
* - qualunque sia il tipo di protocollo di trasporto telematico *
* adottato, la specifica di un IndirizzoTelematico deve essere *
* completa e non ambigua. *
* *
*************************************************************************
-->
<!ELEMENT IndirizzoTelematico (#PCDATA)>
<!ATTLIST IndirizzoTelematico
tipo (smtp | uri | NMTOKEN) "smtp"
note CDATA #IMPLIED>
<!--
*************************** InterventoOperatore *************************
* *
* L'elemento InterventoOperatore esprime la richiesta di intervento di *
* un Operatore ai fini della protocollazione e/o smistamento del *
* Messaggio Protocollato (invece di una protocollazione e/o smistamento *
* che potrebbe essere automatica). Puo` contenere un testo che descrive *
* i motivi della richiesta. *
* *
*************************************************************************
-->
<!ELEMENT InterventoOperatore (#PCDATA)>
<!--
*************************** Riservato ***********************************
* *
* L'elemento Riservato esprime la richiesta di trattamento riservato *
* del Messaggio Protocollato. Puo` contenere un testo che descrive i *
* motivi della richiesta *
* *
*************************************************************************
-->
<!ELEMENT Riservato (#PCDATA)>
<!--
*************************** RiferimentoDocumentiCartacei ****************
* *
* L'elemento RiferimentoDocumentiCartacei e` indice della presenza nel *
* Messaggio Protocollato di riferimenti esterni a Documenti Cartacei e *
* quindi della necessita' di effettuare una validazione manuale della *
* corrispondenza tra i dati riportati nella Segnatura Informatica sui *
* documenti in questione. *
* *
*************************************************************************
-->
<!ELEMENT RiferimentoDocumentiCartacei EMPTY>
<!--
*************************** RiferimentiTelematici ***********************
* *
* L'elemento RiferimentiTelematici e' indice della presenza nel *
* Messaggio Protocollato di riferimenti esterni a Documenti Informatici *
* dislocati in una posizione remota (e.g. repositorio condiviso). *
* *
* La collocazione effettiva dei Documenti Informatici e` indicata *
* all'interno dell'elemento Documento. *
* *
*************************************************************************
-->
<!ELEMENT RiferimentiTelematici EMPTY>
<!--
*************************** Oggetto *************************************
* *
* L'elemento Oggetto contiene la descrizione testuale dell'oggetto del *
* messaggio. *
* La descrizione testuale contenuta nell'elemento Oggetto dovrebbe *
* essere significativa e dovrebbe avere una lunghezza congrua, *
* tipicamente almeno 30 caratteri. *
* *
*************************************************************************
-->
<!ELEMENT Oggetto (#PCDATA)>
<!--
*************************** Classifica **********************************
* *
* L'elemento Classifica contiene l'indicazione di una Classifica. *
* Inserito al primo livello nell'Intestazione, l'elemento Classifica *
* indica la Classifica del Messaggio Protocollato. *
* Nelle altre posizioni in cui viene utilizzato nella DTD tale elemento *
* indica una Classifica attribuibile all'elemento che ne costituisce *
* il contesto. *
* *
*************************************************************************
-->
<!ELEMENT Classifica (CodiceAmministrazione?, CodiceAOO?, Denominazione?,
Livello+)>
<!ELEMENT Denominazione (#PCDATA)>
<!ELEMENT Livello (#PCDATA)>
<!ATTLIST Livello
nome CDATA #IMPLIED>
<!--
*************************** Identificativo ******************************
* *
* Un Identificativo e' un codice che consente di identificare *
* univocamente un'entita' dal punto di vista amministrativo *
* *
* La forma dell'Identificativo puo' essere stabilita dalla *
* amministrazione che lo attribuisce. Un Identificativo deve essere *
* compatibile con la formazione di un identificativo telematico come *
* URI, cioe` Uniform Resource Identifier (RFC 1738). *
* *
* Regole aggiuntive *
* - un Identificativo e` codificato mediante caratteri previsti dalla *
* specifica US-ASCII a 8 bit ed e` composto da una sequenza *
* di lettere maiuscole ([A-Z]), lettere minuscole ([a-z]), cifre *
* decimali ([0-9]) e dai caratteri '.', '-' e '_'. *
* - un Identificativo deve avere una lunghezza non superiore a 16 *
* caratteri. *
* *
*************************************************************************
-->
<!ELEMENT Identificativo (#PCDATA)>
<!--
*************************** Note ****************************************
* *
* Un elemento Note contiene delle note esplicative in formato testuale. *
* All'interno dell'elemento Note non e' consentito l'inserimento di *
* testo altrimenti strutturato, ad esempio un frammento di codice XML. *
* *
*************************************************************************
-->
<!ELEMENT Note (#PCDATA)>
<!--
*************************** Mittente ************************************
* *
* La descrizione di un mittente o destinatario istituzionale in forma *
* estesa e strutturata si configura come la descrizione di un percorso *
* all'interno di una struttura organizzativa. *
* Il formato di descrizione di tale percorso e' compatibile con lo *
* schema dell'indice delle pubbliche amministrazioni previsto dal *
* d.P.C.M. XX/YY/ZZ. *
* *
* E` comunque prevista la possibilita' di descrizioni non strutturate, *
* cioe' interamente testuali, di parte o di tutti gli elementi *
* coinvolti al fine di garantire la compatibilita` con sistemi *
* informatici realizzati che utilizzano dati in forma non strutturata o *
* in una forma strutturata non compatibile con quella descritta. *
* Se utilizzata, la descrizione testuale non deve tuttavia contenere *
* forme di strutturazione surrettizia (e.g. uso di *
* "comma-separated values"). Il ricorso a descrizioni testuali non *
* strutturate andrebbe evitato qualora possibile. *
* *
* L'elemento Mittente descrive il mittente del Messaggio Protocollato. *
* *
* Regole di corrispondenza *
* - la Denominazione della AOO mittente deve corrispondere al CodiceAOO *
* indicato nell'Identificatore del Messaggio Protocollato; *
* - la Denominazione della AOO mittente deve corrispondere *
* all'IndirizzoTelematico della casella istituzionale indicata nel *
* Mittente. *
* *
*************************************************************************
-->
<!ELEMENT Mittente (Amministrazione, AOO)>
<!--
*************************** Destinatario ********************************
* *
* L'elemento Destinatario descrive un destinatario del Messaggio *
* Protocollato. *
* *
* Regole aggiuntive *
* - la descrizione del Destinatario deve includere come minimo la *
* Denominazione della Amministrazione oppure una Denominazione *
* generica oppure il riferimento ad una Persona fisica. *
* *
* Regole di corrispondenza *
* - qualora specificata, la Denominazione della AOO destinataria deve *
* corrispondere all'IndirizzoTelematico della casella istituzionale *
* indicata nel Mittente. *
* *
* Si noti che la specifica del Destinatario e' opzionale e pertanto *
* l'inserimento di un simile elemento privo di informazioni *
* significative e' inutile. *
* *
*************************************************************************
-->
<!ELEMENT Destinatario (((Amministrazione, AOO?) | (Denominazione, Persona*)
| Persona+), IndirizzoTelematico?, Telefono*, Fax*, IndirizzoPostale?)>
<!--
*************************** Amministrazione *****************************
* *
* Un elemento Amministrazione rappresenta l'elemento radice della *
* descrizione estesa e strutturata di un mittente o destinatario *
* istituzionale, inteso come percorso all'interno di una struttura *
* organizzativa. *
* *
* Regole aggiuntive *
* - il CodiceAmministrazione dovrebbe essere incluso solo quando *
* l'elemento Amministrazione compare nel contesto di un elemento *
* Destinatario. *
* *
*************************************************************************
-->
<!ELEMENT Amministrazione (Denominazione, CodiceAmministrazione?,
(UnitaOrganizzativa | ((Ruolo | Persona)*, IndirizzoPostale,
IndirizzoTelematico*, Telefono*, Fax*)))>
<!--
*************************** UnitaOrganizzativa **************************
* *
* Un elemento UnitaOrganizzativa rappresenta un elemento nel percorso *
* che costituisce della descrizione di un indirizzo. *
* *
* L'attributo tipo descrive il tipo di unita' organizzativa. *
* Un'unita' organizzativa temporanea potrebbe essere infatti istituita *
* in una amministrazione a fronte di eventi speciali o per emergenza. *
* *
*************************************************************************
-->
<!ELEMENT UnitaOrganizzativa (Denominazione, Identificativo?,
(UnitaOrganizzativa | ((Ruolo | Persona)*, IndirizzoPostale,
IndirizzoTelematico*, Telefono*, Fax*)))>
<!ATTLIST UnitaOrganizzativa
tipo (permanente | temporanea) "permanente">
<!--
*************************** AOO *****************************************
* *
* Un elemento AOO specifica la Denominazione ed eventualmente il *
* CodiceAOO. Non e' necessario che tale specifica contenga altre *
* informazioni dato il contesto in cui questo elemento puo' essere *
* inserito. *
* *
* Regole aggiuntive *
* - il CodiceAOO dovrebbe essere incluso solo quando l'elemento AOO *
* compare nel contesto di un elemento Destinatario. *
* *
*************************************************************************
-->
<!ELEMENT AOO (Denominazione, CodiceAOO?)>
<!--
*************************** Ruolo ***************************************
* *
* Un elemento Ruolo contiene la specifica del ruolo ricoperto da una *
* persona fisica. *
* *
*************************************************************************
-->
<!ELEMENT Ruolo (Denominazione, Identificativo?, Persona?)>
<!--
*************************** Persona *************************************
* *
* Un elemento Persona contiene la specifica di un riferimento ad una *
* persona fisica. *
* *
*************************************************************************
-->
<!ELEMENT Persona ((Denominazione | (Nome?, Cognome, Titolo?,
CodiceFiscale?)), Identificativo?)>
<!ATTLIST Persona
id ID #IMPLIED
rife IDREF #IMPLIED>

<!ELEMENT Nome (#PCDATA)>
<!ELEMENT Cognome (#PCDATA)>
<!ELEMENT Titolo (#PCDATA)>
<!ELEMENT CodiceFiscale (#PCDATA)>
<!--
*************************** IndirizzoPostale ****************************
* *
* Un IndirizzoPostale indica tipicamente la sede di un'unita' *
* organizzativa o amministrazione o l'indirizzo di un cittadino o altro *
* ente esterno alla pubblica amministrazione. *
* *
* L'attributo dug (i.e. Denominazione Urbanistica Generica) *
* dell'elemento Toponimo consente di definire informazioni come "Via", *
* "Viale" o "Piazza", mentre il contenuto testuale dell'elemento ne *
* indica il toponimo (e.g. "Verdi", "XX Settembre"). *
* *
* Regole aggiuntive *
* - il valore dell'attributo opzionale codiceISTAT dell'elemento Comune *
* deve essere formato da sei cifre decimali con giustificazione *
* mediante zeri(e.g. "018190"); *
* - il valore testuale dell'elemento opzionale Nazione indica la *
* codifica internazionale della nazione specificata nell'indirizzo *
* in formato standard ISO 3166-1-Alpha-2. Qualora l'elemento non sia *
* presente o il suo valore non specificato la nazione va interpretata *
* come Italia identificata dal codice "IT"; *
* la lunghezza per questo elemento e' pari a 2 caratteri; *
* - il valore testuale dell'elemento Provincia deve essere formato da *
* due lettere maiuscole (e.g. "RM" per Roma, "PA" per Palermo, etc.); *
* - il valore testuale dell'elemento Civico qualora si riferisca ad un *
* indirizzo privo del numero civico deve contenere *
* l'espressione "snc". *
* *
*************************************************************************
-->
<!ELEMENT IndirizzoPostale (Denominazione | (Toponimo, Civico, CAP, Comune,
Provincia, Nazione?))>

<!ELEMENT Toponimo (#PCDATA)>
<!ATTLIST Toponimo
dug CDATA #IMPLIED>
<!ELEMENT Civico (#PCDATA)>
<!ELEMENT CAP (#PCDATA)>
<!ELEMENT Comune (#PCDATA)>
<!ATTLIST Comune
codiceISTAT CDATA #IMPLIED>
<!ELEMENT Provincia (#PCDATA)>
<!ELEMENT Nazione (#PCDATA)>
<!ELEMENT Telefono (#PCDATA)>
<!ATTLIST Telefono
note CDATA #IMPLIED>
<!ELEMENT Fax (#PCDATA)>
<!ATTLIST Fax
note CDATA #IMPLIED>
<!--
*************************** Riferimenti *********************************
* *
* L'elemento opzionale Riferimenti contiene i riferimenti ad altri *
* Messaggi Protocollati e/o Contesti Procedurali (o in particolare a *
* Procedimenti). *
* *
*************************************************************************
-->




<!ELEMENT Riferimenti (Messaggio | ContestoProcedurale | Procedimento)+>
<!--
*************************** Messaggio ***********************************
* *
* Un elemento Messaggio indica un riferimento ad un Messaggio. *
* *
* Regole di corrispondenza *
* - nella indicazione di un riferimento ad un Messaggio Protocollato *
* deve essere usato l'Identificatore attribuito dalla AOO mittente; *
* - deve anche essere specificato l'Identificatore di prima *
* registrazione, come definito precedentemente, se e solo se esso non *
* coincide con il precedente. *
* *
*************************************************************************
-->
<!ELEMENT Messaggio ((Identificatore | DescrizioneMessaggio),
PrimaRegistrazione?)>
<!--
*************************** DescrizioneMessaggio ************************
* *
* Un elemento DescrizioneMessaggio descrive un riferimento ad un *
* Messaggio non protocollato. *
* *
* Regole di corrispondenza *
* - l'elemento DescrizioneMessaggio deve essere utilizzato solo per i *
* riferimenti a Messaggi non protocollati; *
* - la DescrizioneMessaggio riporta i dati identificativi di *
* trasmissione (e.g. i dati SMTP). *
* *
*************************************************************************
-->
<!ELEMENT DescrizioneMessaggio (#PCDATA)>
<!--
*************************** ContestoProcedurale *************************
* *
* Un elemento ContestoProcedurale indica un riferimento ad un *
* Contesto Procedurale ovvero lo svolgimento di un generico complesso *
* di attivita` amministrative in qualche modo collegate. *
* *
* Un Contesto procedurale e' pertanto un elemento aggregante di *
* attivita' svolte all'interno di una o piu' Unita' Organizzative *
* associate alla stessa AOO; le azioni svolte nell'ambito di un *
* Contesto Procedurale sono finalizzate alla produzione di un *
* risultato, finale o intermedio, che ha valore anche all'esterno *
* delle Unita' Organizzative coinvolte. *
* *
* Regole aggiuntive *
* - la DataAvvio deve essere in formato ISO 8601 esteso *
* (i.e. aaaa-mm-gg - ad esempio 1963-07-15). *
* *
* Regole di corrispondenza *
* - la forma dell'Identificativo puo` essere stabilita dalla AOO che lo *
* attribuisce, tuttavia il contenuto di tale elemento deve essere *
* sufficiente per l'identificazione univoca del corrispondente *
* Contesto Procedurale; *
* - anche il TipoContestoProcedurale puo' essere stabilito dalla AOO *
* che attribuisce l'Identificativo; tuttavia non sono ammessi tipi *
* che corrispondono a Procedimenti (ai sensi della l. 241/90), *
* per cui si deve utilizzare un elemento Procedimento. *
* *
*************************************************************************
-->
<!ELEMENT ContestoProcedurale (CodiceAmministrazione, CodiceAOO,
Identificativo, TipoContestoProcedurale?, Oggetto?, Classifica*, DataAvvio?,
Note?, PiuInfo?)>
<!ATTLIST ContestoProcedurale
id ID #IMPLIED
rife IDREF #IMPLIED>
<!ELEMENT TipoContestoProcedurale (#PCDATA)>
<!ELEMENT DataAvvio (#PCDATA)>
<!--
*************************** Procedimento ********************************
* *
* Un elemento Procedimento indica un riferimento ad un Procedimento *
* (ai sensi della l. 241/90 e dell�articolo 41 del CAD) ed e' formalmente identico *
* all'elemento ContestoProcedurale, con l'aggiunta degli elementi Responsabile *
* e DataTermine. *
* *
* Regole aggiuntive *
* - la DataTermine deve essere in formato ISO 8601 esteso *
* (i.e. aaaa-mm-gg). *
* *
* Regole di corrispondenza *
* - la forma dell'Identificativo puo' essere stabilita dalla AOO *
* che lo attribuisce, tuttavia il contenuto di tale elemento deve *
* essere sufficiente per l'identificazione univoca del corrispondente *
* Procedimento. *
* *
*************************************************************************
-->
<!ELEMENT Procedimento (CodiceAmministrazione, CodiceAOO, Identificativo,
TipoProcedimento?, Oggetto?, Classifica*, Responsabile?, DataAvvio?,
DataTermine?, Note?, PiuInfo?)>
<!ATTLIST Procedimento
id ID #IMPLIED
rife IDREF #IMPLIED>
<!ELEMENT TipoProcedimento (#PCDATA)>
<!ELEMENT Responsabile (Persona)>
<!ELEMENT DataTermine (#PCDATA)>
<!--
*************************** Descrizione *********************************
* *
* L'elemento opzionale Descrizione contiene la descrizione strutturata *
* del contenuto del Messaggio Protocollato. *
* *
* L'elemento Documento si riferisce al Documento primario del Messaggio *
* protocollato se questo viene inviato da una AOO di una amministrazione*
* ad una AOO di una diversa amministrazione. In tal caso il Documento *
* *
* I Documenti primari riguardanti scambi tra AOO della stessa *
* amministrazione possono essere indicati nell'elemento Documento o, *
* in alternativa, nell'elemento TestoDelMessaggio. *
* *
* Regole aggiuntive *
* - l'elemento Descrizione deve essere presente in una Segnatura *
* Informatica, in quanto permette di interpretare la struttura MIME *
* che rappresenta il Messaggio Protocollato. *
* *
*************************************************************************
-->
<!ELEMENT Descrizione ((Documento | TestoDelMessaggio), Allegati?, Note?)>
<!--
*************************** Documento************************************
* *
* Un elemento Documento specifica un riferimento ad un Documento che *
* costituisce parte integrante del Messaggio Protocollato. *
* L'indicazione dei riferimento a Documenti rappresenta un aspetto *
* cruciale per l'efficacia delle indicazioni tecniche specifiche qui *
* contenute. *
* *
* Si possono avere tre tipi di riferimenti, definiti dal valore *
* dell'attributo tipoRiferimento di Documento: *
* 1) "MIME" *
* riferimento a un Documento Informatico contenuto nella struttura *
* MIME che costituisce il messaggio; *
* 2) "telematico" *
* riferimento esterno a un Documento Informatico comunque *
* reperibile per altra via (e.g. in un repositorio condiviso); *
* 3) "cartaceo" *
* riferimento esterno a un Documento Cartaceo trasmesso per via *
* tradizionale (e.g. spedizione postale o tramite posta interna). *
* *
* Gli attributi id e nome di Documento caratterizzano dal punto vista *
* tecnico il riferimento al Documento effettivo. Il significato degli *
* attributi varia a seconda del tipo di riferimento. In particolare: *
* *
* - Per i riferimenti di tipo "MIME", il valore dell'attributo nome *
* corrisponde al valore del parametro filename dell'attributo *
* Content-Disposition o, in subordine, al valore del parametro name *
* dell'attributo Content-Type specificato per una body part della *
* struttura MIME. L'attributo id puo' essere utilizzato allo scopo di *
* definire un identificatore univoco del riferimento nell'ambito della *
* struttura XML. *
* *
* - Nel caso di un riferimento di tipo "telematico" l'attributo id puo' *
* essere utilizzato allo scopo di definire un identificatore univoco *
* del riferimento nell'ambito della struttura XML. *
* *
* - Nel caso di un riferimento di tipo "cartaceo" il valore *
* dell'attributo id corrisponde al valore dell'identificativo del *
* Documento Cartaceo e deve essere sempre specificato per i Documenti *
* Cartacei non protocollati, che non hanno quindi un Identificatore di *
* Registrazione riportato nell'elemento PrimaRegistrazione. Nel caso di *
* un Documento Cartaceo privo di identificativo, l'attributo id puo` *
* essere specificato al solo scopo di definire un identificatore *
* univoco del riferimento nell'ambito della struttura XML. Viceversa, *
* l'attributo nome non ha alcun significato e non deve quindi essere *
* utilizzato. *
* *
* L'attributo tipoMIME va utilizzato solo per riferimenti a Documenti *
* Informatici. *
* *
* Regole aggiuntive *
* - devono essere rispettate le regole sopra descritte per l'uso degli *
* attributi di Documento. *
* *
* Regole di corrispondenza *
* - devono essere rispettate le regole di corrispondenza sopra *
* descritte per il significato dei valori degli attributi di *
* Documento. *
* *
*************************************************************************
-->
<!ELEMENT Documento ((CollocazioneTelematica, Impronta?)?, TitoloDocumento?,
PrimaRegistrazione?, TipoDocumento?, Oggetto?, Classifica*, NumeroPagine?,
Note?, PiuInfo?)>
<!ATTLIST Documento
id ID #IMPLIED
rife IDREF #IMPLIED
nome CDATA #IMPLIED
tipoMIME CDATA #IMPLIED
tipoRiferimento (MIME | telematico | cartaceo) "MIME">
<!--
*************************** TitoloDocumento *****************************
* *
* L'elemento opzionale TitoloDocumento contiene l'indicazione del *
* titolo esteso del documento a scopo amministrativo. *
* *
*************************************************************************
-->
<!ELEMENT TitoloDocumento (#PCDATA)>
<!--
*************************** TipoDocumento *******************************
* *
* L'elemento opzionale TipoDocumento contiene l'indicazione del tipo di *
* documento dal punto di vista amministrativo (e.g. circolare, nota *
* informativa). *
* *
*************************************************************************
-->
<!ELEMENT TipoDocumento (#PCDATA)>
<!--
*************************** NumeroPagine *****************************
* *
* L'elemento opzionale NumeroPagine contiene l'indicazione del numero *
* delle pagine che compongono il documento *
* *
*************************************************************************
-->
<!ELEMENT NumeroPagine (#PCDATA)>
<!--
*************************** CollocazioneTelematica, Impronta ************
* *
* Un riferimento esterno di tipo "telematico" comporta la *
* specificazione di un riferimento esterno come URI, cioe` Uniform *
* Resource Identifier (RFC 1738), all'interno di un elemento di tipo *
* CollocazioneTelematica. Ad un riferimento esterno di questo tipo puo' *
* anche essere associata un'impronta. *
* *
* Regole aggiuntive *
* - un elemento CollocazioneTelematica ed, eventualmente, Impronta deve *
* essere presente in un Documento se e solo se il valore *
* dell'attributo tipoRiferimento e' "telematico". *
* - il contenuto dell'elemento CollocazioneTelematica deve essere *
* sintatticamente conforme a quanto previsto dalla specifica *
* pubblica RFC 1738. *
* *
* Regole di corrispondenza *
* - l'Impronta, se presente, deve corrispondere al Documento *
* Informatico indicato nell'elemento CollocazioneTelematica. *
* *
* Si assume comunque che l'accettazione in ingresso di Messaggi *
* Protocollati che contengono riferimenti esterni a Documenti *
* Informatici costituisca una scelta di gestione da parte dell'AOO *
* ricevente. Pertanto, tale accettazione potrebbe essere limitata ad *
* alcuni mittenti istituzionali o negata del tutto. Di quest'aspetto *
* deve essere contenuta indicazione nel manuale di gestione della AOO. *
* *
*************************************************************************
-->
<!ELEMENT CollocazioneTelematica (#PCDATA)>
<!ELEMENT Impronta (#PCDATA)>
<!ATTLIST Impronta
algoritmo CDATA #FIXED "SHA-256"
codifica CDATA #FIXED "base64">
<!--
*************************** TestoDelMessaggio ***************************
* *
* La presenza dell'elemento TestoDelMessaggio nella Segnatura *
* Informatica indica che il Testo del Messaggio e' da considerarsi dal *
* punto di vista formale come il Documento primario e deve essere *
* considerato nella Registrazione di Protocollo. In assenza di tale *
* indicazione il Testo del Messaggio viene semplicemente ignorato. *
* La possibilita' di considerare il Testo del Messaggio come documento *
* primario e' consentita solo per scambi tra AOO di una stessa *
* amministrazione. Nel caso di scambi tra AOO appartenenti ad *
* amministrazioni diverse il Testo del Messaggio viene ignorato ai fini *
* della protocollazione. *
* *
*************************************************************************
-->
<!ELEMENT TestoDelMessaggio EMPTY>
<!ATTLIST TestoDelMessaggio
id CDATA #IMPLIED
tipoMIME CDATA #IMPLIED
tipoRiferimento NMTOKEN #FIXED "MIME">
<!--
*************************** Allegati ************************************
* *
* L'elemento opzionale Allegati contiene una lista di elementi *
* Documento o Fascicolo. Lo scopo di tale lista e` quello di fornire *
* una descrizione, possibilmente strutturata, dei Documenti allegati al *
* Documento primario. *
* Piu` precisamente, il contenuto dell'elemento Allegati ha due scopi: *
* 1) descrivere l'elenco dei Documenti allegati; *
* 2) descrivere la struttura dal punto di vista amministrativo del *
* Messaggio Protocollato, in termini di organizzazione in Fascicoli *
* dei Documenti inclusi. *
* E` quindi anche possibile che, nella descrizione della struttura, *
* si faccia riferimento piu' volte allo stesso Documento, incluso il *
* Documento primario (e.g. Documenti logicamente appartenenti a piu` di *
* un Fascicolo). *
* *
* Regole di corrispondenza *
* - la citazione multipla di uno stesso Documento nella descrizione *
* strutturale contenuta in Allegati deve essere resa utilizzando il *
* meccanismo XML degli ID/IDREF. In altri termini, il riferimento *
* effettivo al Documento deve essere specificato una sola volta e *
* accompagnato dalla definizione dell'attributo id di Documento; gli *
* altri riferimenti vengono specificati utilizzando l'attributo rife. *
* *
* Si veda in proposito anche la definizione dell'elemento Documento *
* descritta precedentemente. *
* *
*************************************************************************
-->
<!ELEMENT Allegati (Documento | Fascicolo)+>
<!--
*************************** Fascicolo ***********************************
* *
* Un elemento Fascicolo descrive l'aggregazione di Documenti o altri *
* Fascicoli. *
* L�elemento identificativo indica l�identificativo del fascicolo *
* previsto dall�articolo 41 del CAD *
* *
*************************************************************************
-->
<!ELEMENT Fascicolo (CodiceAmministrazione?, CodiceAOO?, Oggetto?,
Identificativo?, Classifica*, Note?, PiuInfo? , (Documento | Fascicolo)+)>
<!ATTLIST Fascicolo
id ID #IMPLIED
rife IDREF #IMPLIED>
<!--
*************************** PiuInfo *********************************
* *
* L'elemento opzionale PiuInfo contiene ulteriori, relative all'elemento padre *
* di PiuInfo, che non e' possibile associare ad altri elementi. *
* Qualora due o piu' amministrazioni stabiliscano di scambiarsi *
* informazioni non previste tra quelle definite, le stesse possono estendere *
* il file segnatura con le informazioni specifiche stabilite di comune *
* accordo utilizzando l'elemento PiuInfo. *
* Tali informazioni devono essere strutturate nel formato XML, *
* utilizzando uno Schema XML la cui localizzazione e� specificata *
* nell�attributo XMLSchema dell'elemento. *
* L'insieme di queste informazioni costituisce un corpo che puo' *
* essere inserito direttamente all'interno di Segnatura *
* (nel sub-elemento MetadatiInterni) o all�?'esterno (nel subelemento *
* MetadatiEsterni). Nel secondo caso, tale insieme individua *
* concretamente un file specificato dall�elemento MetadatiEsterni. *
* All�interno dell�elemento Segnatura, il sub-elemento PiuInfo *
* puo� essere utilizzato per descrivere i documenti trasmessi *
* coerentemente con uno schema che utilizzi un insieme di *
* metadati specializzato nel dominio: quindi l'elemento PiuInfo, *
* qui definito il piu' genericamente possibile ai fini dell'interoperabilita', *
* offre ampi margini d�intervento per l'elaborazione di raffinamenti *
* ovvero per la definizione di strutture di metadati adeguate *
* allo specifico contesto d'uso. *
* *
*************************************************************************
-->
<!ELEMENT PiuInfo (MetadatiInterni|MetadatiEsterni)>
<!ATTLIST PiuInfo XMLSchema NMTOKEN #REQUIRED>
<!--
*************************** MetadatiInterni *********************************
* *
* L'elemento MetadatiInterni contiene le informazioni dell'elemento *
* PiuInfo, integrate all�interno di Segnatura e strutturate nel formato XML. *
* *
*************************************************************************
-->
<!ELEMENT MetadatiInterni (#PCDATA)>
<!--
*************************** MetadatiEsterni *********************************
* *
* L'elemento MetadatiEsterni contiene le informazioni dell'elemento PiuInfo, *
* contenute all'esterno di Segnatura in un file XML le cui caratteristiche sono *
* descritte nei subelementi di MetadatiEsterni. *
* *
*************************************************************************
-->
<!ELEMENT MetadatiEsterni (NomeFile, Impronta?)>
<!ATTLIST MetadatiEsterni
codifica (7bit|8bit|binary|base64|quotedprintable|xtoken) #REQUIRED
estensione NMTOKEN #IMPLIED
formato CDATA #REQUIRED>
<!--
*************************** NomeFile *********************************
* *
* L'elemento NomeFile riporta il nome del file cui l'elemento si riferisce. *
* *
*************************************************************************
-->
<!ELEMENT NomeFile (#PCDATA)>
<!--
*************************** ConfermaRicezione ***************************
* *
* In generale, un Messaggio di Conferma di Ricezione contiene un *
* Documento XML avente una ConfermaRicezione come "ROOT ELEMENT". *
* Un elemento ConfermaRicezione riporta l'Identificatore di protocollo *
* attribuito al Messaggio dal ricevente e la descrizione del *
* MessaggioRicevuto. *
* Per gli attributi di ConfermaRicezione valgono le stesse *
* considerazioni svolte per gli attributi dell'elemento Segnatura. *
* *
*************************************************************************
-->
<!ELEMENT ConfermaRicezione (Identificatore, MessaggioRicevuto, Riferimenti?,
Descrizione?)>
<!ATTLIST ConfermaRicezione
versione NMTOKEN #FIXED "aaaa-mm-gg"
xml:lang NMTOKEN #FIXED "it">
<!--
*************************** MessaggioRicevuto ***************************
* *
* L'elemento MessaggioRicevuto contiene la descrizione del messaggio *
* ricevuto. L'identificatore corrisponde alla registrazione di *
* protocollo in uscita da parte del mittente. *
* *
* Regole di corrispondenza *
* - l'elemento DescrizioneMessaggio deve essere utilizzato solo per *
* confermare la ricezione di Messaggi non protocollati. *
* *
*************************************************************************
-->
<!ELEMENT MessaggioRicevuto ((Identificatore, PrimaRegistrazione?) |
DescrizioneMessaggio)>
<!--
*************************** AggiornamentoConferma ***********************
* *
* In generale, un Messaggio di Aggiornamento di Conferma contiene un *
* Documento XML avente una AggiornamentoConferma come "ROOT ELEMENT". *
* Un elemento AggiornamentoConferma contiene un aggiornamento di una *
* ConfermaRicezione inviata in precedenza. *
* L'Identificatore corrisponde alla registrazione di protocollo in *
* ingresso da parte del ricevente. *
* Per gli attributi di AggioranmentoConferma valgono le stesse *
* considerazioni svolte per gli attributi dell'elemento Segnatura. *
* *
*************************************************************************
-->
<!ELEMENT AggiornamentoConferma (Identificatore, MessaggioRicevuto,
Riferimenti?, Descrizione?)>
<!ATTLIST AggiornamentoConferma
versione NMTOKEN #FIXED "aaaa-mm-gg"
xml:lang NMTOKEN #FIXED "it">
<!--
*************************** NotificaEccezione ***************************
* *
* In generale, un Messaggio di Notifica di Eccezione contiene un *
* Documento XML avente un NotificaEccezione come "ROOT ELEMENT". *
* Un elemento NotificaEccezione riporta la descrizione del *
* MessaggioRicevuto e la descrizione testuale del Motivo che ha *
* generato l'eccezione. *
* Per gli attributi di NotificaEccezione valgono le stesse *
* considerazioni svolte per gli attributi dell'elemento Segnatura. *
* *
* Regole di corrispondenza *
* - l'elemento Identificatore deve contenere l'identificatore di *
* protocollo attribuito al Messaggio dal ricevente; qualora non sia *
* stato possibile protocollare in ingresso il Messaggio Ricevuto *
* l'elemento Identificatore non deve essere incluso; *
* - la descrizione del Motivo deve essere specifica e direttamente *
* associabile alla causa che ha generato l'eccezione. *
* *
*************************************************************************
-->
<!ELEMENT NotificaEccezione (Identificatore?, MessaggioRicevuto, Motivo)>
<!ATTLIST NotificaEccezione
versione NMTOKEN #FIXED "aaaa-mm-gg"
xml:lang NMTOKEN #FIXED "it">
<!ELEMENT Motivo (#PCDATA)>
<!--
**************************** AnnullamentoProtocollazione ****************
* *
* In generale, un Messaggio di Annullamento Protocollazione contiene *
* un Documento XML avente un AnnullamentoProtocollazione come *
* "ROOT ELEMENT". *
* *
* Un elemento AnnullamentoProtocollazione contiene l'identificatore *
* della registrazione annullata e gli estremi del corrispondente *
* provvedimento amministrativo. *
* Per gli attributi di AnnullamentoProtocollazione valgono le stesse *
* considerazioni svolte per gli attributi dell'elemento Segnatura. *
* *
*************************************************************************
-->
<!ELEMENT AnnullamentoProtocollazione (Identificatore, Motivo,
Provvedimento)>
<!ATTLIST AnnullamentoProtocollazione
versione NMTOKEN #FIXED "aaaa-mm-gg"
xml:lang NMTOKEN #FIXED "it">
<!ELEMENT Provvedimento (#PCDATA)>


